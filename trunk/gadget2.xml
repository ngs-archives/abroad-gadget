<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<ModulePrefs title="test" />
<Require feature="opensocial-0.8" />
<Content type="html">
<![CDATA[
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
<script>
function request(q) {  
  var params = {};
  params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.JSON;
  var url = "http://devlab.agektmr.com/Book/search.php?q=";
  url += encodeURIComponent(q);
  gadgets.io.makeRequest(url, response, params);
};
function response(obj){
	//console.log(obj.data);
	var result = obj.data;
	$("#results").empty();
	$.each(result.items, function(){
		var img = this.s_image.url;
		var title = this.title;
		var url = this.url;
		$("#results").append('<li><a href="'+url+'">'+title+'</a><img src="'+img+'" /></li>');
	})
}
$(function(){
	$("#search").submit(function(){
		request($("#query").val());
		return false;
	})
})
</script>
<div>
<form action="#" id="search">
	<input type="text" name="query" id="query" />
	<input type="submit" value="検索" />
</form>
<ul id="results"></ul>

</div>
]]>
</Content>
</Module>



